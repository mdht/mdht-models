<project name="CDA Model Flattening"  basedir="." default="transformFlatten">

	<property name="modelPath.uml" location="${basedir}.model/model/hitsp.uml"/>
	<property name="consolidatedProjectPath" location="../org.openhealthtools.mdht.uml.cda.consol.model"/>
	<property name="consolidatedModelPath.uml" location="${consolidatedProjectPath}/model/consol.uml"/>
	<property name="vocabModelPath.uml" location="${consolidatedProjectPath}/model/consol-vocab.uml"/>
	
	<import file="transform.xml"/>

    <target name="transformFlatten" description="Flatten inherited templates.">
        <cdatools model="${modelPath.uml}">
        	<!-- <model file="../org.openhealthtools.mdht.uml.cda.cdt.model/model/cdt.uml" /> -->
        	<modelElement qname="cdt::GeneralHeaderConstraints" />
        	
            <flattenModel includeBaseModel="false" outputModel="${consolidatedModelPath.uml}" 
            	vocabModel="${vocabModelPath.uml}"/>
        </cdatools>

  	  <eclipse.convertPath fileSystemPath="${consolidatedProjectPath}" property="resourcePath"/>
  	  <eclipse.refreshLocal resource="${resourcePath}" depth="infinite"/>
    </target>

</project>
