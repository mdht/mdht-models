<project name="CDA Model Flattening"  basedir="." default="all">

	<import file="transform.xml"/>

	<target name="all">
		<antcall target="transformFlatten"/>
		<antcall target="transformFilter"/>
		<antcall target="transformDomain"/>
	</target>

    <target name="transformFlatten" description="Flatten inherited templates.">
        <cdatools model="${modelPath.uml}">
            <flattenModel includeBaseModel="true" outputModel="${flattenedModelPath.uml}"/>
        </cdatools>

    	<antcall target="refresh"/>
    </target>

    <target name="transformFilter" description="Filter and apply business names.">
        <cdatools model="${flattenedModelPath.uml}">
            <filterModel outputModel="${filteredModelPath.uml}"/>
        </cdatools>

    	<antcall target="refresh"/>
    </target>

    <target name="transformDomain" description="Flatten inherited templates.">
    	<property name="generateDomainInterface" value="false"/>
    	<property name="includeInterfaceRealization" value="false"/>
    	<property name="generateDomainClasses" value="true"/>
    	<property name="includeFixedValueGetters" value="false"/>
    	<property name="useBusinessNames" value="true"/>
    	
        <cdatools model="${modelPath.uml}">
            <transformToDomainModel domainModel="${domainModelPath.uml}"/>
        </cdatools>
		<antcall target="convertDomainPaths"/>
    	
    	<antcall target="refresh"/>
    </target>
	
</project>
